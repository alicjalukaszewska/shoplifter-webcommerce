"use strict";(self.webpackChunkshoplifter=self.webpackChunkshoplifter||[]).push([[592],{6847:(p,s,e)=>{e.d(s,{h:()=>T});const a=[{code:"10OFF",value:10},{code:"50OFF",value:50}];var m=e(608),t=e(5e3),g=e(5415),h=e(3450),C=e(5245),d=e(9808),u=e(3075),v=e(7423),_=e(7232);function f(o,c){if(1&o&&(t.TgZ(0,"div",2)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"currency"),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"cart.shippingCost")),t.xp6(3),t.hij(" ",t.lcZ(6,4,t.lcZ(7,6,n.shipping)||"cart.setShipping")," ")}}function y(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"input",8),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw().discountCoupon=r})("ngModelChange",function(){return t.CHM(n),t.oxw().checkDiscount()}),t.ALo(1,"translate"),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngModel",n.discountCoupon)("placeholder",t.lcZ(1,2,"demo.coupon"))}}function O(o,c){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,(null==n.discount?null:n.discount.code)||"common.none")," ")}}function x(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).removeDiscount()}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA()()}2&o&&t.Q6J("title",t.lcZ(1,1,"cart.removeDiscount"))}const S=function(o){return{discount:o}};function Z(o,c){if(1&o&&(t.TgZ(0,"div",9)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,x,4,3,"button",10),t.qZA()),2&o){const n=t.oxw();t.xp6(2),t.hij(" ",t.xi3(3,2,"cart.discount",t.VKq(5,S,n.discount.value))," "),t.xp6(2),t.Q6J("ngIf",!n.readonly)}}let T=(()=>{class o{constructor(n,i){this.cartService=n,this.localStorageService=i,this.readonly=!1,this.cartLength=0,this.cartTotal=0,this.totalWithDiscount=0,this.cart=[],this.discountCoupon=""}checkDiscount(){this.discountCoupon=this.discountCoupon.trim();const n=a.find(i=>i.code.toLowerCase()===this.discountCoupon.toLowerCase());n&&(this.discount=n,this.localStorageService.add("discount",n),this.totalWithDiscount=this.cartService.getCartTotalWithDiscount())}removeDiscount(){this.localStorageService.remove("discount"),this.discount=void 0,this.discountCoupon="",this.totalWithDiscount=this.cartService.getCartTotalWithDiscount()}manageCart(){this.cartTotal=this.cartService.cartTotal,this.totalWithDiscount=this.cartService.getCartTotalWithDiscount(),this.cartSubscription$=this.cartService.cart$.subscribe(n=>{this.cartTotal=this.cartService.cartTotal,this.totalWithDiscount=this.cartService.getCartTotalWithDiscount()})}manageShippingCost(){this.cartService.shippingCost=this.shipping,this.totalWithDiscount=this.cartService.getCartTotalWithDiscount()}ngOnInit(){var n;this.manageCart();const i=this.localStorageService.get("discount");i&&(this.discount=i,this.discountCoupon=i.code);const r=this.localStorageService.get("shipping");r&&(this.shipping=(null===(n=m.c.find(l=>l.price===r.shipping))||void 0===n?void 0:n.price)||0,this.manageShippingCost())}ngOnDestroy(){this.cartSubscription$&&this.cartSubscription$.unsubscribe()}ngOnChanges(){this.manageShippingCost()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.N),t.Y36(h.n))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-summary"]],inputs:{readonly:"readonly",shipping:"shipping"},features:[t.TTD],decls:29,vars:22,consts:[[1,"summary"],[1,"summary-list"],[1,"summary-row"],["class","summary-row",4,"ngIf"],["type","text",3,"ngModel","placeholder","ngModelChange",4,"ngIf"],[4,"ngIf"],["class","discount",4,"ngIf"],[1,"estimated-total"],["type","text",3,"ngModel","placeholder","ngModelChange"],[1,"discount"],["type","button","mat-icon-button","",3,"title","click",4,"ngIf"],["type","button","mat-icon-button","",3,"title","click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h3")(2,"mat-icon"),t._uU(3,"shopping_cart"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",1)(7,"div",2)(8,"div"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"currency"),t.qZA()(),t.YNc(14,f,8,8,"div",3),t.TgZ(15,"div",2)(16,"div"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,y,2,4,"input",4),t.YNc(20,O,3,3,"div",5),t.qZA(),t.YNc(21,Z,5,7,"div",6),t.qZA(),t.TgZ(22,"div",7)(23,"div"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"div"),t._uU(27),t.ALo(28,"currency"),t.qZA()()()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,10,"cart.orderSummary")," "),t.xp6(5),t.Oqu(t.lcZ(10,12,"cart.subtotal")),t.xp6(3),t.Oqu(t.lcZ(13,14,i.cartTotal)),t.xp6(2),t.Q6J("ngIf",i.readonly),t.xp6(3),t.Oqu(t.lcZ(18,16,"cart.couponCode")),t.xp6(2),t.Q6J("ngIf",!i.readonly),t.xp6(1),t.Q6J("ngIf",i.readonly),t.xp6(1),t.Q6J("ngIf",i.discount),t.xp6(3),t.Oqu(t.lcZ(25,18,"cart.estimatedTotal")),t.xp6(3),t.Oqu(t.lcZ(28,20,i.totalWithDiscount)))},directives:[C.Hw,d.O5,u.Fj,u.JJ,u.On,v.lW],pipes:[_.X$,d.H9],styles:[".summary[_ngcontent-%COMP%]{border:1px solid var(--border-color);padding:1.5rem;margin-bottom:2rem;min-width:350px}.summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-color);display:flex;align-items:center;padding-bottom:1rem}.summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.3rem;height:20px;display:flex;align-items:center}.summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.summary[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--accent);display:flex;justify-content:space-between;align-items:center}.summary[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;height:unset;justify-content:center;height:30px;width:30px}.summary[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0}.summary[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--border-color);outline:0;padding:.5rem}.summary[_ngcontent-%COMP%]   .estimated-total[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-size:1.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}"]}),o})()},608:(p,s,e)=>{e.d(s,{c:()=>a});const a=[{name:"shippingOptions.quick",price:10},{name:"shippingOptions.insured",price:20}]}}]);